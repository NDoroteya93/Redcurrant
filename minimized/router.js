"use strict";class Router{constructor(){this._routes=[],this._mode=null,this._root="/"}get routes(){return this._routes}get mode(){return this._mode}set mode(a){this._mode=a}get root(){return this._root}set root(a){this._root=a}config(a){return this.mode=a&&a.mode&&"history"===a.mode&&history.pushState?"history":"hash",this.root=a&&a.root?"/"+this.clearSlashes(a.root)+"/":"/",this}getFragment(){let a="";if("history"===this.mode)a=this.clearSlashes(decodeURI(location.pathname+location.search)),a=a.replace(/\?(.*)$/,""),a="/"!==this.root?a.replace(this.root,""):a;else{let b=window.location.href.match(/#(.*)$/);a=b?b[1]:""}return this.clearSlashes(a)}clearSlashes(a){return a.toString().replace(/\/$/,"").replace(/^\//,"")}add(a,b){return"function"==typeof a&&(b=a,a=""),this.routes.push({re:a,handler:b}),this}remove(a){for(let b=0;b<this.routes.length;++b){let c=this.routes[b];if(c.handler===a||c.re.toString()===a.toString())return this.routes.splice(b,1),this}return this}flush(){return this.routes=[],this.mode=null,this.root="/",this}check(a){let b=a||this.getFragment();for(let a=0;a<this.routes.length;a++){let c=b.match(this.routes[a].re);if(c)return c.shift(),this.routes[a].handler.apply({},c),this}return this}listen(){let a=this,b=a.getFrag,c=function(){b!==a.getFragment()&&(b=a.getFragment(),a.check(b))};return clearInterval(this.interval),this.interval=setInterval(c,50),this}navigate(a){return a=a||"","history"===this.mode?history.pushState(null,null,this.root+this.clearSlashes(a)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+a,this}}export{Router};